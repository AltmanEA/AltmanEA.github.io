<html>

<head>
    <title>Объектно-ориентированное программирование. Лабораторная работа 3. Классы.</title>
    <script src="https://vk.com/js/api/openapi.js?169" type="text/javascript"></script>
</head>

<body style="width: 800px;">
    <script type="text/javascript">
        console.log(window.location.hostname)
        if (window.location.hostname == "altmanea.ru")
            VK.init({
                apiId: 51579302,
                onlyWidgets: true
            })
        else
            setTimeout(
                function () { location.reload() },
                10000)
    </script>

    <h3>3. Классы.</h3>

    <p><b>Цель работы</b> - изучить понятия класса, научиться создавать типы и конструировать объекты этого типа. </p>
    <p>Доработайте игру из предыдущей лабораторной работы с использованием классов. Дополните функционал игры
        возможностью сохранения и последующей загрузки игры. Шаблоны классов и реализацию интерфейса
        игры можно найти в <a
            href="https://raw.githubusercontent.com/AltmanEA/OOPBasic1/main/40_class/30_Class_start.zip">
            шаблоне проекта</a>.
    </p>

    <h4>Класс <code>Board</code></h4>
    <p>Класс служит для определения типа объекта <code>board</code> из предыдущей работы с дополнительными методами.</p>
    <p>Конструктор класса должен создавать объект используя аргумент типа <code>string</code> или <code>Cell[]</code>
        (используя операцию сужения типа). При создании объекта из строки используется статическая функция
        <code>fromString</code>. Для создании копии объекта будет использоваться функция <code>clone</code>.
    </p>
    <p>Новый метод <code>status</code> возвращает либо строку с результатом игры, либо, если игра не закончена, строку
        "Идет игра".</p>

    <h4>Класс <code>State</code></h4>
    <p>Объекты класса <code>State</code> хранят данные о состоянии игры: положение на доске и символ, который будет
        выставлен следующим ходом. При текущем функционале игры в этом классе нет необходимости, но его использование
        позволяет относительно легко добавить новые возможности в игру, например, возможность пропускать ход.</p>

    <h4>Класс <code>Game</code></h4>
    <p>Класс служит для определения типа объекта <code>game</code> из предыдущей работы с дополнительными методами.</p>
    <p>Свойство <code>steps</code> теперь служит для хранения массива состояний игры. Свойство <code>state</code>
        (представленное с помощью сеттера) возвращает текущее состояние игры.</p>
    <p>Конструктор и функция <code>clone</code> нужны для создания объектов, остальные методы класса аналогичны методам
        объекта <code>game</code> из предыдущей работы.</p>

    <h4>Класс <code>Site</code></h4>
    <p>В этом классе реализуется новая функциональность — возможность сохранения игры. Игры сохраняются в виде пар
        ключ-игра. Ключ — это строка, некоторым образом идентифицирующая игру, в качестве которой рекомендуется
        использовать время
        сохранения игры, котором можно получить с помощью выражения <code>new Date().toLocaleString()</code>. Игра это
        объект класс <code>Game</code>.</p>
    <p>Текущая игра хранится в свойстве <code>game</code> объекта класса <code>Site</code>, а сохраненные игры — в
        свойстве <code>Games</code>. Нужно заметить, что в программе будет один объекта класса <code>Site</code>.</p>
    <p>Метод <code>save</code> добавляет в массив <code>Games</code> текущую игру, сгенерировав для нее ключ. Метод
        <code>load</code> загружает из массива <code>Games</code> текущую игру. Метод <code>keys</code> используется в
        интерфейсы игры для определения списка возможных ключей (игр) для перехода к ним.
    </p>

    <h4>Файл <code>index.ts</code></h4>
    <p>В этом файле реализован интерфейс игры. Для лучшего понимания назначения описанных выше классов рекомендуется
        изучить исходный код в этом файле. </p>

    <h3>Вопросы и комментарии</h3>
    <div id="vk_comments"></div>
    <script type="text/javascript">
        if (window.location.hostname == "altmanea.ru")
            VK.Widgets.Comments('vk_comments')
    </script>

</body>

</html>